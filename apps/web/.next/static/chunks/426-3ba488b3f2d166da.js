(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{5420:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(5831).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6166:function(e,t,a){Promise.resolve().then(a.bind(a,3835)),Promise.resolve().then(a.bind(a,9779)),Promise.resolve().then(a.bind(a,1906)),Promise.resolve().then(a.t.bind(a,6801,23)),Promise.resolve().then(a.t.bind(a,7753,23))},1087:function(e,t,a){"use strict";a.d(t,{A:function(){return r}}),a(3514);var r=(0,a(7027).$)("4649ad17d922e3ccf081fcb49c8b04e6e2a64d4f")},5807:function(e,t,a){"use strict";a.d(t,{k:function(){return s}});var r=a(6793);async function s(e){let{document:t,variables:a,apiSecret:s,config:n}=e,l=await fetch("/api/auth/token").then(e=>e.json());return(0,r.x)({document:t,apiSecret:s,config:n,variables:a,token:l})}},8064:function(e,t,a){"use strict";a.d(t,{z:function(){return s}});var r=a(229);let s=a(3982).forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("button",{ref:t,className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors\n      bg-primary text-primary-foreground hover:bg-primary/90\n      focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\n      disabled:opacity-50 disabled:pointer-events-none\n      h-10 px-4 ".concat(a),...s})});s.displayName="Button"},1408:function(e,t,a){"use strict";a.d(t,{_:function(){return c}});var r=a(229),s=a(3982),n=a(1572),l=a(4153);let o=(0,s.forwardRef)((e,t)=>(0,s.createElement)(l.WV.label,(0,n.Z)({},e,{ref:t,onMouseDown:t=>{var a;null===(a=e.onMouseDown)||void 0===a||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}})));var d=a(465),i=a(2329);let u=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:a,children:s,title:n,error:l,...d}=e;return(0,r.jsxs)(o,{ref:t,className:(0,i.cn)(u(),a),...d,children:[(0,r.jsx)("div",{className:"mb-2",children:n}),s,l?(0,r.jsx)("div",{className:"mt-2 text-sm font-normal text-red-500",children:l}):null]})});c.displayName=o.displayName},7097:function(e,t,a){"use strict";a.d(t,{o:function(){return m}});var r=a(229),s=a(3982),n=a(9761),l=a(7966),o=a(2329);let d=n.fC,i=n.xz,u=n.h_,c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-background/20 backdrop-brightness-50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});c.displayName=n.aV.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,r.jsxs)(u,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(n.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",a),...d,children:[s,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})}).displayName=n.Dx.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})}).displayName=n.dk.displayName;let m=e=>{let{children:t,buttonText:a,close:n=!1}=e,[l,o]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{n&&o(!1)},[n]),(0,r.jsxs)(d,{open:l,onOpenChange:o,children:[(0,r.jsx)(i,{asChild:!0,children:(0,r.jsx)("button",{className:"text-sm",children:a})}),(0,r.jsx)(f,{className:"overflow-y-scroll max-h-[calc(100vh-4rem)] sm:max-w-lg",children:t})]})}},3835:function(e,t,a){"use strict";a.r(t),a.d(t,{SellGoods:function(){return v}});var r=a(229),s=a(3982),n=a(2003),l=a(5870),o=a(774);let d=()=>(0,l.cI)({resolver:(0,n.F)(o.q)});var i=a(1408),u=a(2679),c=a(5357),f=a(8064),m=a(7097),x=a(5807),h=a(1087);let v=e=>{let{warehouseId:t,inventory:a}=e,{register:n,handleSubmit:l,reset:o}=d(),[v,p]=(0,s.useState)(!1);return(0,r.jsxs)(m.o,{close:v,buttonText:(0,r.jsx)("div",{className:" hover:underline underline-offset-4",children:"Sell"}),children:[(0,r.jsx)("div",{children:a.product.name}),(0,r.jsx)("div",{children:a.quantity}),(0,r.jsxs)("form",{onSubmit:l(async e=>{let{productId:t,quantity:a,warehouseId:r}=e,{data:s,error:n}=await (0,x.k)({document:c.mE,variables:{warehouseId:r,productId:t,quantity:a}});s&&(0,h.A)(c.CN.Query.myWarehouses),n&&alert("Selling products failed."),p(!0),o()}),children:[(0,r.jsx)(i._,{title:"Quantity",children:(0,r.jsx)(u.I,{...n("quantity",{valueAsNumber:!0})})}),(0,r.jsx)(i._,{title:"Warehouse ID (readonly)",children:(0,r.jsx)(u.I,{...n("warehouseId",{valueAsNumber:!0}),readOnly:!0,value:t})}),(0,r.jsx)(i._,{title:"Product ID (readonly)",children:(0,r.jsx)(u.I,{...n("productId",{valueAsNumber:!0}),readOnly:!0,value:a.product.id})}),(0,r.jsx)(f.z,{type:"submit",children:"Submit"})]})]})}},9779:function(e,t,a){"use strict";a.r(t),a.d(t,{TransferGoods:function(){return v}});var r=a(229),s=a(3982),n=a(2003),l=a(5870),o=a(774);let d=()=>(0,l.cI)({resolver:(0,n.F)(o.Kt)});var i=a(1408),u=a(2679),c=a(5357),f=a(8064),m=a(5807),x=a(7097),h=a(1087);let v=e=>{let{warehouseId:t,inventory:a}=e,{register:n,handleSubmit:l,reset:o}=d(),[v,p]=(0,s.useState)(!1);return(0,r.jsxs)(x.o,{close:v,buttonText:(0,r.jsx)("div",{className:" hover:underline underline-offset-4",children:"Transfer"}),children:[(0,r.jsx)("div",{children:a.product.name}),(0,r.jsx)("div",{children:a.quantity}),(0,r.jsxs)("form",{onSubmit:l(async e=>{let{productId:t,quantity:a,fromWarehouseId:r,toWarehouseId:s}=e,{data:n,error:l}=await (0,m.k)({document:c.aC,variables:{fromWarehouseId:r,productId:t,quantity:a,toWarehouseId:s}});(null==n?void 0:n.transferInventory)&&(0,h.A)(c.CN.Query.myWarehouses),l&&alert("Transfer failed."),p(!0),o()}),children:[(0,r.jsx)(i._,{title:"Quantity",children:(0,r.jsx)(u.I,{...n("quantity",{valueAsNumber:!0})})}),(0,r.jsx)(i._,{title:"Warehouse ID (readonly)",children:(0,r.jsx)(u.I,{...n("fromWarehouseId",{valueAsNumber:!0}),readOnly:!0,value:t})}),(0,r.jsx)(i._,{title:"Product ID (readonly)",children:(0,r.jsx)(u.I,{...n("productId",{valueAsNumber:!0}),readOnly:!0,value:a.product.id})}),(0,r.jsx)(i._,{title:"Target Warehouse ID",children:(0,r.jsx)(u.I,{...n("toWarehouseId",{valueAsNumber:!0})})}),(0,r.jsx)(f.z,{type:"submit",children:"Submit"})]})]})}},1906:function(e,t,a){"use strict";a.r(t),a.d(t,{UpsertInventory:function(){return b}});var r=a(229),s=a(2003),n=a(5870),l=a(774);let o=()=>(0,n.cI)({resolver:(0,s.F)(l._U)});var d=a(2679),i=a(1408);a(3514);var u=(0,a(7027).$)("7d9f611925e1d4d0caf11cd8349eac5b2ab54ab6"),c=a(5420),f=a(3982),m=a(8064),x=a(5807),h=a(5357);let v=e=>{let{onSelect:t,manufacturerId:a}=e,[s,n]=(0,f.useState)([]),[l,o]=(0,f.useState)(!0);return((0,f.useEffect)(()=>{(async()=>{let{data:e}=await (0,x.k)({document:h.kV,variables:{orderBy:{createdAt:h.As.Desc}},config:{next:{tags:[h.CN.Query.myWarehouses]}}});n(null==e?void 0:e.myProducts),o(!1)})()},[a]),l)?(0,r.jsx)("p",{children:"Loading products..."}):(0,r.jsxs)("select",{onChange:e=>t(Number(e.target.value)),className:"w-full px-3 py-2 border rounded border-input bg-background",children:[(0,r.jsx)("option",{value:"",children:"Select a product..."}),null==s?void 0:s.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})};var p=a(7097);let b=e=>{var t;let{warehouse:a}=e,{register:s,setValue:n,handleSubmit:l,formState:{errors:x},reset:h}=o();console.log("errors ",x);let[b,y]=(0,f.useState)(!1);return(0,r.jsxs)(p.o,{close:b,buttonText:(0,r.jsx)("div",{className:"p-1 bg-black rounded-full shadow-md",children:(0,r.jsx)(c.Z,{className:"p-1 text-white "})}),children:[a.name,(0,r.jsxs)("form",{onSubmit:l(async e=>{let{productId:t,quantity:a,warehouseId:r}=e;console.log("data",t,a,r),await u({productId:t,quantity:a,warehouseId:r}),h(),y(!0)}),children:[(0,r.jsx)(i._,{title:"Product",error:null===(t=x.productId)||void 0===t?void 0:t.message,children:(0,r.jsx)(v,{onSelect:function(e){n("productId",e)},manufacturerId:a.id})}),(0,r.jsx)(i._,{title:"Quantity",children:(0,r.jsx)(d.I,{...s("quantity",{valueAsNumber:!0})})}),(0,r.jsx)(i._,{title:"Warehouse ID (readonly)",children:(0,r.jsx)(d.I,{...s("warehouseId",{valueAsNumber:!0}),readOnly:!0,value:a.id})}),(0,r.jsx)(m.z,{type:"submit",children:"Submit"})]})]})}}}]);