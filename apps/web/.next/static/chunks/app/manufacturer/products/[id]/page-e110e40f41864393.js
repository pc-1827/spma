(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{8639:function(t,e,l){Promise.resolve().then(l.bind(l,1919))},7743:function(t,e,l){"use strict";l.d(e,{Dx:function(){return r},Rn:function(){return i}});var n=l(229),o=l(2329);let r=t=>{let{children:e,className:l}=t;return(0,n.jsx)("div",{className:(0,o.cn)("text-xl font-semibold capitalize mb-2",l),children:e})},i=t=>{let{children:e,className:l}=t;return(0,n.jsx)("div",{className:(0,o.cn)("text-lg font-semibold capitalize mb-2",l),children:e})}},7533:function(t,e,l){"use strict";l.d(e,{D:function(){return r}});var n=l(229);l(3982);var o=l(168);let r=t=>{let{height:e="calc(100vh - 4rem)",...l}=t;return(0,n.jsxs)(o.ZP,{...l,mapStyle:"mapbox://styles/mapbox/dark-v10",mapboxAccessToken:"pk.eyJ1IjoiaGlqaWFuZ3RhbyIsImEiOiJjampxcjFnb3E2NTB5M3BvM253ZHV5YjhjIn0.WneUon5qFigfJRJ3oaZ3Ow",style:{height:e},pitch:22.5,scrollZoom:!1,doubleClickZoom:!1,children:[(0,n.jsx)(i,{}),l.children]})},i=()=>{let{current:t}=(0,o.Sx)();return null==t||t.on("style.load",()=>{null==t||t.getMap().setFog({color:"rgb(250,250,250)",range:[1,10],"high-color":"rgb(200,200,200)","horizon-blend":.05,"space-color":"rgb(150, 150, 150)","star-intensity":.5})}),null}},4532:function(t,e,l){"use strict";l.d(e,{J:function(){return r}});var n=l(229),o=l(168);let r=t=>(0,n.jsx)(o.Jx,{...t})},8450:function(t,e,l){"use strict";l.d(e,{s:function(){return o}});var n=l(229);let o=t=>{let{children:e,className:l,position:o}=t;return(0,n.jsx)("div",{className:"absolute space-y-2 p-2 ".concat({"left-top":"top-0 left-0 flex flex-col items-start","left-center":"top-1/2 -translate-y-1/2 left-0 flex flex-col items-start","left-bottom":"bottom-0 left-0 flex flex-col items-start","center-bottom":"bottom-0 left-1/2 -translate-x-1/2 flex flex-col items-center text-center","right-bottom":"bottom-0 right-0 flex flex-col items-end text-right","right-center":"top-1/2 -translate-y-1/2 right-0 flex flex-col items-end text-right","right-top":"top-0 right-0 flex flex-col items-end text-right","center-top":"top-0 left-1/2 -translate-x-1/2 flex flex-col items-center text-center","center-center":"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center text-center"}[o]," ").concat(l),children:e})}},8461:function(t,e,l){"use strict";l.d(e,{li:function(){return h},mk:function(){return d}});var n=l(229),o=l(5420),r=l(2049),i=l(5408),a=l(168);let u=t=>{let{children:e}=t;return(0,n.jsx)("div",{className:"flex flex-col overflow-hidden border border-white divide-y divide-white rounded shadow-lg bg-white/50 backdrop-blur backdrop-filter",children:e})},c=()=>{let{current:t}=(0,a.Sx)();return(0,n.jsx)("button",{className:"rounded-none hover:bg-white ",type:"button",onClick:()=>null==t?void 0:t.zoomIn(),children:(0,n.jsx)(o.Z,{className:"w-8 h-8 p-1.5 "})})},s=()=>{let{current:t}=(0,a.Sx)();return(0,n.jsx)("button",{className:"rounded-none hover:bg-white ",type:"button",onClick:()=>null==t?void 0:t.zoomOut(),children:(0,n.jsx)(r.Z,{className:"w-8 h-8 p-1.5 "})})},d=t=>{let{onClick:e,Icon:l=i.Z}=t,{current:o}=(0,a.Sx)();return(0,n.jsx)("button",{className:" hover:bg-white",type:"button",onClick:()=>{let{lat:t,lng:l}=null==o?void 0:o.getCenter();e({lat:t,lng:l})},children:(0,n.jsx)(l,{className:"w-8 h-8 p-1.5 text-black"})})};u.ZoomIn=c,u.ZoomOut=s;let h=t=>{let{children:e}=t;return(0,n.jsxs)(u,{children:[(0,n.jsx)(c,{}),(0,n.jsx)(s,{}),e]})}},1919:function(t,e,l){"use strict";l.r(e),l.d(e,{ProductFlow:function(){return b},StyledIcon:function(){return y}});var n=l(229),o=l(7533),r=l(8932),i=l(4532),a=l(8450),u=l(5831);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,u.Z)("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);var s=l(5408);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,u.Z)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);l(3982);var h=l(168);let x=(t,e)=>({latitude:(t.latitude+e.latitude)/2,longitude:(t.longitude+e.longitude)/2}),f=t=>{let{from:e,to:l,children:o,lineId:r}=t;if(!e||!l)return null;let i=x(e,l),a=[[e.longitude,e.latitude],[l.longitude,l.latitude]];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(h.Hw,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:a}},children:[(0,n.jsx)(h.mh,{id:"lineLayer-".concat(r),type:"line",source:"source-".concat(r),paint:{"line-color":"rgb(0,0,0)","line-width":1.5,"line-dasharray":[6,3]}}),(0,n.jsx)(h.mh,{id:"circleLayer-".concat(r),type:"circle",source:"circleSource-".concat(r),paint:{"circle-radius":4,"circle-color":"rgb(0,0,0)"}})]}),o&&(0,n.jsx)(h.Jx,{longitude:i.longitude,latitude:i.latitude,children:(0,n.jsx)("div",{className:"px-1 text-xs text-white rounded-full bg-black/50",children:o})})]})};var m=l(7743),p=l(8461);let v=t=>{let e=new Map;return null==t||t.forEach(t=>{if(!t.fromWarehouse||!t.toWarehouse)return;let l="".concat(t.fromWarehouse.id,",").concat(t.toWarehouse.id);if(e.has(l)){let n=e.get(l);n&&(n.quantity+=t.quantity)}else e.set(l,{...t})}),Array.from(e.values())},g=t=>{let e=[];if(t.forEach(t=>{var l,n;(null===(l=t.toWarehouse)||void 0===l?void 0:l.location)&&e.push({latitude:t.toWarehouse.location.latitude,longitude:t.toWarehouse.location.longitude}),(null===(n=t.fromWarehouse)||void 0===n?void 0:n.location)&&e.push({latitude:t.fromWarehouse.location.latitude,longitude:t.fromWarehouse.location.longitude})}),0===e.length)return r.Kx;let l=e[0].latitude,n=e[0].latitude,o=e[0].longitude,i=e[0].longitude;e.forEach(t=>{l=Math.min(l,t.latitude),n=Math.max(n,t.latitude),o=Math.min(o,t.longitude),i=Math.max(i,t.longitude)});let a=n-l,u=i-o;return l-=.1*a,n+=.1*a,o-=.1*u,i+=.1*u,[{lat:l,lng:o},{lat:n,lng:i}]},b=t=>{let{product:e}=t;return(0,n.jsxs)("div",{children:[(0,n.jsx)(m.Rn,{children:"Product flow"}),(0,n.jsxs)(o.D,{initialViewState:{bounds:g((null==e?void 0:e.transactions)||[])},children:[(0,n.jsx)(a.s,{position:"right-center",children:(0,n.jsx)(p.li,{})}),null==e?void 0:e.inventories.map(t=>{var e,l;return(0,n.jsxs)(i.J,{anchor:"bottom",offset:[0,-6],longitude:(null===(e=t.warehouse.location)||void 0===e?void 0:e.longitude)||0,latitude:(null===(l=t.warehouse.location)||void 0===l?void 0:l.latitude)||0,children:[t.warehouse.manufacturer?(0,n.jsx)(y,{Icon:c}):null,t.warehouse.distributor?(0,n.jsx)(y,{Icon:s.Z}):null,t.warehouse.retailer?(0,n.jsx)(y,{Icon:d}):null,(0,n.jsx)("div",{className:"absolute p-1 font-semibold translate-y-1/3 -translate-x-1/3 bottom-full left-full",children:t.quantity})]},t.id)}),v(null==e?void 0:e.transactions).map(t=>{var e,l;return(0,n.jsx)(f,{from:null===(e=t.fromWarehouse)||void 0===e?void 0:e.location,to:null===(l=t.toWarehouse)||void 0===l?void 0:l.location,lineId:"".concat(t.id),children:t.quantity},t.id)})]})]})},y=t=>{let{Icon:e}=t;return(0,n.jsx)(e,{className:"stroke-2 p-0.5 rounded shadow-lg shadow-black/20 bg-black/80 border border-black text-white"})}},2329:function(t,e,l){"use strict";l.d(e,{cn:function(){return r}});var n=l(8370),o=l(2157);function r(){for(var t=arguments.length,e=Array(t),l=0;l<t;l++)e[l]=arguments[l];return(0,o.m6)((0,n.W)(e))}},8932:function(t,e,l){"use strict";l.d(e,{Kx:function(){return o},NW:function(){return n}});let n={longitude:72.878723,latitude:19.077793,zoom:8},o=[{lat:18.8875712067,lng:72.7443244885},{lat:19.2406186802,lng:73.0423213886}]}},function(t){t.O(0,[2,263,852,194,744],function(){return t(t.s=8639)}),_N_E=t.O()}]);