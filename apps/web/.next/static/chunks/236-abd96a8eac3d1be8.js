"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{1087:function(e,t,n){n.d(t,{A:function(){return r}}),n(3514);var r=(0,n(7027).$)("4649ad17d922e3ccf081fcb49c8b04e6e2a64d4f")},5807:function(e,t,n){n.d(t,{k:function(){return o}});var r=n(6793);async function o(e){let{document:t,variables:n,apiSecret:o,config:l}=e,i=await fetch("/api/auth/token").then(e=>e.json());return(0,r.x)({document:t,apiSecret:o,config:l,variables:n,token:i})}},2915:function(e,t,n){n.d(t,{g:function(){return i}});var r=n(229),o=n(3982),l=n(2329);let i=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...o})});i.displayName="Textarea"},1632:function(e,t,n){n.r(t),n.d(t,{CreateWarehouse:function(){return O},CreateWarehouseContent:function(){return C},MapMarker:function(){return E}});var r=n(229),o=n(2003),l=n(5870),i=n(774);let a=()=>(0,l.cI)({resolver:(0,o.F)(i.Xd)}),u=e=>{let{children:t}=e,n=a();return(0,r.jsx)(l.RV,{...n,children:t})};var c=n(2679),s=n(8932),f=n(7533),d=n(8461),h=n(3982),p=n(8450),x=n(5408),y=n(4532);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=(0,n(5831).Z)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);var m=n(5649),v=n(168);function g(e){let{onLocationChange:t}=e,[n,o]=h.useState(!1),[l,i]=h.useState(""),{loading:a,setSearchText:u,locationInfo:s=[]}=(0,m.VC)();h.useEffect(()=>{u(l)},[u,l]);let{current:f}=(0,v.Sx)();return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.I,{placeholder:"Search place...",value:l,onChange:e=>{o(e.target.value.length>0),i(e.target.value)},className:"border border-white bg-white/50"}),n?(0,r.jsxs)("div",{children:[a&&(0,r.jsx)(b,{}),(0,r.jsx)("div",{className:"absolute z-10 mt-0.5 overflow-hidden rounded-lg top-full",children:null==s?void 0:s.map(e=>(0,r.jsx)("button",{className:"block w-full p-2 text-left underline transition-all underline-offset-4 hover:bg-white bg-white/30 backdrop-blur",onClick:()=>{let{latLng:[n,r]}=e;t&&t({latitude:n,longitude:r,zoom:10}),o(!1),i(""),null==f||f.flyTo({center:{lat:n,lng:r},essential:!0})},children:e.placeName},e.placeName))})]}):null]})}var j=n(5807),w=n(5357),k=n(2915),S=n(1087),N=n(661);let O=e=>{let{warehouseRole:t,redirectUrl:n}=e;return(0,r.jsx)(u,{children:(0,r.jsx)(C,{warehouseRole:t,redirectUrl:n})})},C=e=>{let{warehouseRole:t,redirectUrl:n}=e,{register:o,handleSubmit:i,reset:a,setValue:u}=(0,l.Gc)(),h=(0,N.useRouter)();return(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("form",{onSubmit:i(async e=>{let{name:r,description:o,address:l}=e,{data:i,error:u}=await (0,j.k)({document:w.wb,variables:{createWarehouseInput:{address:l,name:r,description:o,...t}}});i&&((0,S.A)(w.CN.Query.myWarehouses),h.replace(n),a()),u&&alert(u)}),className:"space-y-2",children:[(0,r.jsx)("h1",{className:"mb-2 text-lg font-semibold",children:"Create warehouse"})," ",(0,r.jsx)(c.I,{...o("name"),placeholder:"Warehouse name"}),(0,r.jsx)(k.g,{...o("description"),placeholder:"Warehouse description"}),(0,r.jsx)(k.g,{...o("address.address"),placeholder:"Warehouse address"}),(0,r.jsx)("button",{type:"submit",children:"Create warehouse"})]}),(0,r.jsxs)(f.D,{initialViewState:s.NW,children:[(0,r.jsx)(E,{initialLocation:s.NW}),(0,r.jsxs)(p.s,{position:"left-top",children:[(0,r.jsx)(g,{onLocationChange:e=>{u("address.latitude",e.latitude),u("address.longitude",e.longitude)}}),(0,r.jsx)(d.li,{children:(0,r.jsx)(d.mk,{onClick:e=>{let t=parseFloat(e.lat.toFixed(6)),n=parseFloat(e.lng.toFixed(6));u("address.latitude",t,{shouldValidate:!0}),u("address.longitude",n,{shouldValidate:!0})}})})]})]})]})},E=e=>{let{initialLocation:t,Icon:n=x.Z}=e,{setValue:o}=(0,l.Gc)(),{address:i}=(0,l.qo)();return(0,h.useEffect)(()=>{if(t){let{latitude:e,longitude:n}=t;o("address",{latitude:e,longitude:n,address:""})}},[t,o]),(0,r.jsx)(y.J,{pitchAlignment:"auto",longitude:(null==i?void 0:i.longitude)||0,latitude:(null==i?void 0:i.latitude)||0,draggable:!0,onDragEnd:e=>{let{lngLat:t}=e,{lat:n,lng:r}=t;o("address.latitude",n||0),o("address.longitude",r||0)},children:(0,r.jsx)(n,{className:"w-8 h-8 p-1.5"})})}},7533:function(e,t,n){n.d(t,{D:function(){return l}});var r=n(229);n(3982);var o=n(168);let l=e=>{let{height:t="calc(100vh - 4rem)",...n}=e;return(0,r.jsxs)(o.ZP,{...n,mapStyle:"mapbox://styles/mapbox/dark-v10",mapboxAccessToken:"pk.eyJ1IjoiaGlqaWFuZ3RhbyIsImEiOiJjampxcjFnb3E2NTB5M3BvM253ZHV5YjhjIn0.WneUon5qFigfJRJ3oaZ3Ow",style:{height:t},pitch:22.5,scrollZoom:!1,doubleClickZoom:!1,children:[(0,r.jsx)(i,{}),n.children]})},i=()=>{let{current:e}=(0,o.Sx)();return null==e||e.on("style.load",()=>{null==e||e.getMap().setFog({color:"rgb(250,250,250)",range:[1,10],"high-color":"rgb(200,200,200)","horizon-blend":.05,"space-color":"rgb(150, 150, 150)","star-intensity":.5})}),null}},4532:function(e,t,n){n.d(t,{J:function(){return l}});var r=n(229),o=n(168);let l=e=>(0,r.jsx)(o.Jx,{...e})},8450:function(e,t,n){n.d(t,{s:function(){return o}});var r=n(229);let o=e=>{let{children:t,className:n,position:o}=e;return(0,r.jsx)("div",{className:"absolute space-y-2 p-2 ".concat({"left-top":"top-0 left-0 flex flex-col items-start","left-center":"top-1/2 -translate-y-1/2 left-0 flex flex-col items-start","left-bottom":"bottom-0 left-0 flex flex-col items-start","center-bottom":"bottom-0 left-1/2 -translate-x-1/2 flex flex-col items-center text-center","right-bottom":"bottom-0 right-0 flex flex-col items-end text-right","right-center":"top-1/2 -translate-y-1/2 right-0 flex flex-col items-end text-right","right-top":"top-0 right-0 flex flex-col items-end text-right","center-top":"top-0 left-1/2 -translate-x-1/2 flex flex-col items-center text-center","center-center":"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center text-center"}[o]," ").concat(n),children:t})}},8461:function(e,t,n){n.d(t,{li:function(){return d},mk:function(){return f}});var r=n(229),o=n(5420),l=n(2049),i=n(5408),a=n(168);let u=e=>{let{children:t}=e;return(0,r.jsx)("div",{className:"flex flex-col overflow-hidden border border-white divide-y divide-white rounded shadow-lg bg-white/50 backdrop-blur backdrop-filter",children:t})},c=()=>{let{current:e}=(0,a.Sx)();return(0,r.jsx)("button",{className:"rounded-none hover:bg-white ",type:"button",onClick:()=>null==e?void 0:e.zoomIn(),children:(0,r.jsx)(o.Z,{className:"w-8 h-8 p-1.5 "})})},s=()=>{let{current:e}=(0,a.Sx)();return(0,r.jsx)("button",{className:"rounded-none hover:bg-white ",type:"button",onClick:()=>null==e?void 0:e.zoomOut(),children:(0,r.jsx)(l.Z,{className:"w-8 h-8 p-1.5 "})})},f=e=>{let{onClick:t,Icon:n=i.Z}=e,{current:o}=(0,a.Sx)();return(0,r.jsx)("button",{className:" hover:bg-white",type:"button",onClick:()=>{let{lat:e,lng:n}=null==o?void 0:o.getCenter();t({lat:e,lng:n})},children:(0,r.jsx)(n,{className:"w-8 h-8 p-1.5 text-black"})})};u.ZoomIn=c,u.ZoomOut=s;let d=e=>{let{children:t}=e;return(0,r.jsxs)(u,{children:[(0,r.jsx)(c,{}),(0,r.jsx)(s,{}),t]})}},5649:function(e,t,n){n.d(t,{VC:function(){return h},bZ:function(){return s},iN:function(){return p}});var r=n(661),o=n(3982),l=n(5004),i=n(5441),a=n(6997),u=n(564),c=n(5203);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,n]=(0,o.useState)(e),l=(0,r.usePathname)(),i=(0,o.useRef)(l);return(0,o.useEffect)(()=>{l!==i.current&&(n(!1),i.current=l)},[l,t]),[t,n]},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,[t]=(0,o.useState)(()=>new l.x);return(0,o.useEffect)(()=>{let n=t.pipe((0,i.b)(e),(0,a.b)(e=>e()),(0,u.K)(()=>c.E)).subscribe();return()=>n.unsubscribe()},[e,t]),t},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,[n,r]=(0,o.useState)(e),l=f(t);return(0,o.useEffect)(()=>{l.next(()=>r(e))},[l,e]),n},h=()=>{let[e,t]=(0,o.useState)(""),[n,r]=(0,o.useState)(!1),[l,i]=(0,o.useState)(()=>[]),a=d(e,300);return(0,o.useEffect)(()=>{r(!0),fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(a,".json?fuzzyMatch=true&access_token=pk.eyJ1IjoiaWFta2FydGhpY2siLCJhIjoiY2t4b3AwNjZ0MGtkczJub2VqMDZ6OWNrYSJ9.-FMKkHQHvHUeDEvxz2RJWQ")).then(e=>e.json()).then(e=>{var t;i(null===(t=e.features)||void 0===t?void 0:t.map(e=>({placeName:e.place_name,latLng:[e.center[1],e.center[0]]})))}).finally(()=>r(!1))},[a,i]),{loading:n,setLoading:r,searchText:e,setSearchText:t,locationInfo:l}},p=()=>{let[e,t]=(0,o.useState)(!1);return[{uploading:e,percent:0},async e=>{if(!(null==e?void 0:e.length))return[];t(!0);try{return t(!1),[]}catch(e){return console.log(e),t(!1),[]}}]}},8932:function(e,t,n){n.d(t,{Kx:function(){return o},NW:function(){return r}});let r={longitude:72.878723,latitude:19.077793,zoom:8},o=[{lat:18.8875712067,lng:72.7443244885},{lat:19.2406186802,lng:73.0423213886}]},7027:function(e,t,n){Object.defineProperty(t,"$",{enumerable:!0,get:function(){return o}});let r=n(3514);function o(e){let{createServerReference:t}=n(4186);return t(e,r.callServer)}},6211:function(e,t,n){n.d(t,{CR:function(){return s},FC:function(){return h},Jh:function(){return u},KL:function(){return p},XA:function(){return c},ZT:function(){return o},_T:function(){return i},ev:function(){return f},mG:function(){return a},pi:function(){return l},qq:function(){return d}});var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function a(e,t,n,r){return new(n||(n=Promise))(function(o,l){function i(e){try{u(r.next(e))}catch(e){l(e)}}function a(e){try{u(r.throw(e))}catch(e){l(e)}}function u(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(i,a)}u((r=r.apply(e,t||[])).next())})}function u(e,t){var n,r,o,l,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return l={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(a){return function(u){return function(a){if(n)throw TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,l=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(o)throw o.error}}return i}function f(e,t,n){if(n||2==arguments.length)for(var r,o=0,l=t.length;o<l;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function d(e){return this instanceof d?(this.v=e,this):new d(e)}function h(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),l=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){l.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{var n;(n=o[e](t)).value instanceof d?Promise.resolve(n.value.v).then(u,c):s(l[0][2],n)}catch(e){s(l[0][3],e)}}function u(e){a("next",e)}function c(e){a("throw",e)}function s(e,t){e(t),l.shift(),l.length&&a(l[0][0],l[0][1])}}function p(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=c(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,o,(t=e[n](t)).done,t.value)})}}}"function"==typeof SuppressedError&&SuppressedError}}]);